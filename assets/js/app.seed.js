$.intervalArr=[];var calc_navbar_height=function(){var height=null;if($('#header').length)height=$('#header').height();if(height===null)height=$('<div id="header"></div>').height();if(height===null)return 49;return height;},navbar_height=calc_navbar_height,shortcut_dropdown=$('#shortcut'),bread_crumb=$('#ribbon ol.breadcrumb'),topmenu=false,thisDevice=null,ismobile=(/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase())),jsArray={},initApp=(function(app){app.addDeviceType=function(){if(!ismobile){$.root_.addClass("desktop-detected");thisDevice="desktop";return false;}else{$.root_.addClass("mobile-detected");thisDevice="mobile";if(fastClick){$.root_.addClass("needsclick");FastClick.attach(document.body);return false;}}};app.menuPos=function(){if($.root_.hasClass("menu-on-top")||localStorage.getItem('sm-setmenu')=='top'){topmenu=true;$.root_.addClass("menu-on-top");}};app.SmartActions=function(){var smartActions={userLogout:function($this){$.SmartMessageBox({title:"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>"+$('#show-shortcut').text()+"</strong></span> ?",content:$this.data('logout-msg')||"You can improve your security further after logging out by closing this opened browser",buttons:'[No][Yes]'},function(ButtonPressed){if(ButtonPressed=="Yes"){$.root_.addClass('animated fadeOutUp');setTimeout(logout,1000);}});function logout(){window.location=$this.attr('href');}},resetWidgets:function($this){$.SmartMessageBox({title:"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage",content:$this.data('reset-msg')||"Would you like to RESET all your saved widgets and clear LocalStorage?1",buttons:'[No][Yes]'},function(ButtonPressed){if(ButtonPressed=="Yes"&&localStorage){localStorage.clear();location.reload();}});},launchFullscreen:function(element){if(!$.root_.hasClass("full-screen")){$.root_.addClass("full-screen");if(element.requestFullscreen){element.requestFullscreen();}else if(element.mozRequestFullScreen){element.mozRequestFullScreen();}else if(element.webkitRequestFullscreen){element.webkitRequestFullscreen();}else if(element.msRequestFullscreen){element.msRequestFullscreen();}}else{$.root_.removeClass("full-screen");if(document.exitFullscreen){document.exitFullscreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}}},minifyMenu:function($this){if(!$.root_.hasClass("menu-on-top")){$.root_.toggleClass("minified");$.root_.removeClass("hidden-menu");$('html').removeClass("hidden-menu-mobile-lock");$this.effect("highlight",{},500);}},toggleMenu:function(){if(!$.root_.hasClass("menu-on-top")){$('html').toggleClass("hidden-menu-mobile-lock");$.root_.toggleClass("hidden-menu");$.root_.removeClass("minified");}else if($.root_.hasClass("menu-on-top")&&$(window).width()<979){$('html').toggleClass("hidden-menu-mobile-lock");$.root_.toggleClass("hidden-menu");$.root_.removeClass("minified");}},toggleShortcut:function(){if(shortcut_dropdown.is(":visible")){shortcut_buttons_hide();}else{shortcut_buttons_show();}shortcut_dropdown.find('a').click(function(e){e.preventDefault();window.location=$(this).attr('href');setTimeout(shortcut_buttons_hide,300);});$(document).mouseup(function(e){if(!shortcut_dropdown.is(e.target)&&shortcut_dropdown.has(e.target).length===0){shortcut_buttons_hide();}});function shortcut_buttons_hide(){shortcut_dropdown.animate({height:"hide"},300,"easeOutCirc");$.root_.removeClass('shortcut-on');}function shortcut_buttons_show(){shortcut_dropdown.animate({height:"show"},200,"easeOutCirc");$.root_.addClass('shortcut-on');}}};$.root_.on('click','[data-action="launchFullscreen"]',function(e){smartActions.launchFullscreen(document.documentElement);e.preventDefault();});$.root_.on('click','[data-action="minifyMenu"]',function(e){var $this=$(this);smartActions.minifyMenu($this);e.preventDefault();$this=null;});$.root_.on('click','[data-action="toggleMenu"]',function(e){smartActions.toggleMenu();e.preventDefault();});$.root_.on('click','[data-action="toggleShortcut"]',function(e){smartActions.toggleShortcut();e.preventDefault();});};app.leftNav=function(){if(!topmenu){if(!null){$('nav ul').jarvismenu({accordion:menu_accordion||true,speed:menu_speed||true,closedSign:'<em class="fa fa-plus-square-o"></em>',openedSign:'<em class="fa fa-minus-square-o"></em>'});}else{alert("Error - menu anchor does not exist");}}};app.domReadyMisc=function(){if($("[rel=tooltip]").length){$("[rel=tooltip]").tooltip();}$('#search-mobile').click(function(){$.root_.addClass('search-mobile');});$('#cancel-search-js').click(function(){$.root_.removeClass('search-mobile');});$('#activity').click(function(e){var $this=$(this);if($this.find('.badge').hasClass('bg-color-red')){$this.find('.badge').removeClassPrefix('bg-color-');$this.find('.badge').text("0");}if(!$this.next('.ajax-dropdown').is(':visible')){$this.next('.ajax-dropdown').fadeIn(150);$this.addClass('active');}else{$this.next('.ajax-dropdown').fadeOut(150);$this.removeClass('active');}var theUrlVal=$this.next('.ajax-dropdown').find('.btn-group > .active > input').attr('id');$this=null;theUrlVal=null;e.preventDefault();});$('input[name="activity"]').change(function(){var $this=$(this);url=$this.attr('id');container=$('.ajax-notifications');loadURL(url,container);$this=null;});$(document).mouseup(function(e){if(!$('.ajax-dropdown').is(e.target)&&$('.ajax-dropdown').has(e.target).length===0){$('.ajax-dropdown').fadeOut(150);$('.ajax-dropdown').prev().removeClass("active");}});$('button[data-btn-loading]').on('click',function(){var btn=$(this);btn.button('loading');setTimeout(function(){btn.button('reset');},3000);});$this=$('#activity > .badge');if(parseInt($this.text())>0){$this.addClass("bg-color-red bounceIn animated");$this=null;}};app.mobileCheckActivation=function(){if($(window).width()<979){$.root_.addClass('mobile-view-activated');$.root_.removeClass('minified');}else if($.root_.hasClass('mobile-view-activated')){$.root_.removeClass('mobile-view-activated');}if(debugState){console.log("mobileCheckActivation");}}
return app;})({});initApp.addDeviceType();initApp.menuPos();jQuery(document).ready(function(){initApp.SmartActions();initApp.leftNav();initApp.domReadyMisc();});(function($,window,undefined){var elems=$([]),jq_resize=$.resize=$.extend($.resize,{}),timeout_id,str_setTimeout='setTimeout',str_resize='resize',str_data=str_resize+'-special-event',str_delay='delay',str_throttle='throttleWindow';jq_resize[str_delay]=throttle_delay;jq_resize[str_throttle]=true;$.event.special[str_resize]={setup:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false;}var elem=$(this);elems=elems.add(elem);try{$.data(this,str_data,{w:elem.width(),h:elem.height()});}catch(e){$.data(this,str_data,{w:elem.width,h:elem.height});}if(elems.length===1){loopy();}},teardown:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false;}var elem=$(this);elems=elems.not(elem);elem.removeData(str_data);if(!elems.length){clearTimeout(timeout_id);}},add:function(handleObj){if(!jq_resize[str_throttle]&&this[str_setTimeout]){return false;}var old_handler;function new_handler(e,w,h){var elem=$(this),data=$.data(this,str_data);data.w=w!==undefined?w:elem.width();data.h=h!==undefined?h:elem.height();old_handler.apply(this,arguments);}if($.isFunction(handleObj)){old_handler=handleObj;return new_handler;}else{old_handler=handleObj.handler;handleObj.handler=new_handler;}}};function loopy(){timeout_id=window[str_setTimeout](function(){elems.each(function(){var width;var height;var elem=$(this),data=$.data(this,str_data);try{width=elem.width();}catch(e){width=elem.width;}try{height=elem.height();}catch(e){height=elem.height;}if(width!==data.w||height!==data.h){elem.trigger(str_resize,[data.w=width,data.h=height]);}});loopy();},jq_resize[str_delay]);}})(jQuery,this);$('#main').resize(function(){initApp.mobileCheckActivation();});var ie=(function(){var undef,v=3,div=document.createElement('div'),all=div.getElementsByTagName('i');while(div.innerHTML='<!--[if gt IE '+(++v)+']><i></i><![endif]-->',all[0]);return v>4?v:undef;}());$.fn.extend({jarvismenu:function(options){var defaults={accordion:'true',speed:200,closedSign:'[+]',openedSign:'[-]'},opts=$.extend(defaults,options),$this=$(this);$this.find("li").each(function(){if($(this).find("ul").size()!==0){$(this).find("a:first").append("<b class='collapse-sign'>"+opts.closedSign+"</b>");if($(this).find("a:first").attr('href')=="#"){$(this).find("a:first").click(function(){return false;});}}});$this.find("li.active").each(function(){$(this).parents("ul").slideDown(opts.speed);$(this).parents("ul").parent("li").find("b:first").html(opts.openedSign);$(this).parents("ul").parent("li").addClass("open");});$this.find("li a").click(function(){if($(this).parent().find("ul").size()!==0){if(opts.accordion){if(!$(this).parent().find("ul").is(':visible')){parents=$(this).parent().parents("ul");visible=$this.find("ul:visible");visible.each(function(visibleIndex){var close=true;parents.each(function(parentIndex){if(parents[parentIndex]==visible[visibleIndex]){close=false;return false;}});if(close){if($(this).parent().find("ul")!=visible[visibleIndex]){$(visible[visibleIndex]).slideUp(opts.speed,function(){$(this).parent("li").find("b:first").html(opts.closedSign);$(this).parent("li").removeClass("open");});}}});}}if($(this).parent().find("ul:first").is(":visible")&&!$(this).parent().find("ul:first").hasClass("active")){$(this).parent().find("ul:first").slideUp(opts.speed,function(){$(this).parent("li").removeClass("open");$(this).parent("li").find("b:first").delay(opts.speed).html(opts.closedSign);});}else{$(this).parent().find("ul:first").slideDown(opts.speed,function(){$(this).parent("li").addClass("open");$(this).parent("li").find("b:first").delay(opts.speed).html(opts.openedSign);});}}});}});jQuery.fn.doesExist=function(){return jQuery(this).length>0;};function runAllForms(){if($.fn.slider){$('.slider').slider();}if($.fn.select2){$('select.select2').each(function(){var $this=$(this),width=$this.attr('data-select-width')||'100%';$this.select2({allowClear:true,width:width});$this=null;});}if($.fn.mask){$('[data-mask]').each(function(){var $this=$(this),mask=$this.attr('data-mask')||'error...',mask_placeholder=$this.attr('data-mask-placeholder')||'X';$this.mask(mask,{placeholder:mask_placeholder});$this=null;});}if($.fn.autocomplete){$('[data-autocomplete]').each(function(){var $this=$(this),availableTags=$this.data('autocomplete')||["The","Quick","Brown","Fox","Jumps","Over","Three","Lazy","Dogs"];$this.autocomplete({source:availableTags});$this=null;});}if($.fn.datepicker){$('.datepicker').each(function(){var $this=$(this),dataDateFormat=$this.attr('data-dateformat')||'dd.mm.yy';$this.datepicker({dateFormat:dataDateFormat,prevText:'<i class="fa fa-chevron-left"></i>',nextText:'<i class="fa fa-chevron-right"></i>',});$this=null;});}$('button[data-loading-text]').on('click',function(){var btn=$(this);btn.button('loading');setTimeout(function(){btn.button('reset');btn=null;},3000);});}if($.navAsAjax||$(".google_maps")){var gMapsLoaded=false;window.gMapsCallback=function(){gMapsLoaded=true;$(window).trigger('gMapsLoaded');};window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var script_tag=document.createElement('script');script_tag.setAttribute("type","text/javascript");script_tag.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback");(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script_tag);};}function loadScript(scriptName,callback){if(!jsArray[scriptName]){jsArray[scriptName]=true;var body=document.getElementsByTagName('body')[0],script=document.createElement('script');script.type='text/javascript';script.src=scriptName;script.onload=callback;body.appendChild(script);}else if(callback){if(debugState){root.root.console.log("This script was already loaded %c: "+scriptName,debugStyle_warning);}callback();}}if($.navAsAjax){if($('nav').length){checkURL();}$(document).on('click','nav a[href!="#"]',function(e){e.preventDefault();var $this=$(e.currentTarget);if(!$this.parent().hasClass("active")&&!$this.attr('target')){if($.root_.hasClass('mobile-view-activated')){$.root_.removeClass('hidden-menu');$('html').removeClass("hidden-menu-mobile-lock");window.setTimeout(function(){if(window.location.search){window.location.href=window.location.href.replace(window.location.search,'').replace(window.location.hash,'')+'#'+$this.attr('href');}else{window.location.hash=$this.attr('href');}},150);}else{if(window.location.search){window.location.href=window.location.href.replace(window.location.search,'').replace(window.location.hash,'')+'#'+$this.attr('href');}else{window.location.hash=$this.attr('href');}}}});$(document).on('click','nav a[target="_blank"]',function(e){e.preventDefault();var $this=$(e.currentTarget);window.open($this.attr('href'));});$(document).on('click','nav a[target="_top"]',function(e){e.preventDefault();var $this=$(e.currentTarget);window.location=($this.attr('href'));});$(document).on('click','nav a[href="#"]',function(e){e.preventDefault();});$(window).on('hashchange',function(){checkURL();});}function checkURL(){var url=location.href.split('#').splice(1).join('#');if(!url){try{var documentUrl=window.document.URL;if(documentUrl){if(documentUrl.indexOf('#',0)>0&&documentUrl.indexOf('#',0)<(documentUrl.length+1)){url=documentUrl.substring(documentUrl.indexOf('#',0)+1);}}}catch(err){}}container=$('#content');if(url){$('nav li.active').removeClass("active");$('nav li:has(a[href="'+url+'"])').addClass("active");var title=($('nav a[href="'+url+'"]').attr('title'));document.title=(title||document.title);if(debugState){root.console.log("Page title: %c "+document.title,debugStyle_green);}loadURL(url+location.search,container);}else{var $this=$('nav > ul > li:first-child > a[href!="#"]');window.location.hash=$this.attr('href');$this=null;}}function loadURL(url,container){if(debugState){root.root.console.log("Loading URL: %c"+url,debugStyle);}$.ajax({type:"GET",url:url,dataType:'html',cache:true,beforeSend:function(){if($.navAsAjax&&$(".google_maps")[0]&&(container[0]==$("#content")[0])){var collection=$(".google_maps"),i=0;collection.each(function(){i++;var divDealerMap=document.getElementById(this.id);if(i==collection.length+1){}else{if(divDealerMap)divDealerMap.parentNode.removeChild(divDealerMap);if(debugState){root.console.log("Destroying maps.........%c"+this.id,debugStyle_warning);}}});if(debugState){root.console.log("✔ Google map instances nuked!!!");}}if($.navAsAjax&&$('.dataTables_wrapper')[0]&&(container[0]==$("#content")[0])){var tables=$.fn.dataTable.fnTables(true);$(tables).each(function(){if($(this).find('.details-control').length!=0){$(this).find('*').addBack().off().remove();$(this).dataTable().fnDestroy();}else{$(this).dataTable().fnDestroy();}});if(debugState){root.console.log("✔ Datatable instances nuked!!!");}}if($.navAsAjax&&$.intervalArr.length>0&&(container[0]==$("#content")[0])&&enableJarvisWidgets){while($.intervalArr.length>0)clearInterval($.intervalArr.pop());if(debugState){root.console.log("✔ All JarvisWidget intervals cleared");}}if($.navAsAjax&&(container[0]==$("#content")[0])&&enableJarvisWidgets&&$("#widget-grid")[0]){$("#widget-grid").jarvisWidgets('destroy');if(debugState){root.console.log("✔ JarvisWidgets destroyed");}}if($.navAsAjax&&(container[0]==$("#content")[0])){if(typeof pagedestroy=='function'){try{pagedestroy();if(debugState){root.console.log("✔ Pagedestroy()");}}catch(err){pagedestroy=undefined;if(debugState){root.console.log("! Pagedestroy() Catch Error");}}}if($.fn.sparkline&&$("#content .sparkline")[0]){$("#content .sparkline").sparkline('destroy');if(debugState){root.console.log("✔ Sparkline Charts destroyed!");}}if($.fn.easyPieChart&&$("#content .easy-pie-chart")[0]){$("#content .easy-pie-chart").easyPieChart('destroy');if(debugState){root.console.log("✔ EasyPieChart Charts destroyed!");}}if($.fn.select2&&$("#content select.select2")[0]){$("#content select.select2").select2('destroy');if(debugState){root.console.log("✔ Select2 destroyed!");}}if($.fn.mask&&$('#content [data-mask]')[0]){$('#content [data-mask]').unmask();if(debugState){root.console.log("✔ Input Mask destroyed!");}}if($.fn.datepicker&&$('#content .datepicker')[0]){$('#content .datepicker').off();$('#content .datepicker').remove();if(debugState){root.console.log("✔ Datepicker destroyed!");}}if($.fn.slider&&$('#content .slider')[0]){$('#content .slider').off();$('#content .slider').remove();if(debugState){root.console.log("✔ Bootstrap Slider destroyed!");}}}pagefunction=null;container.removeData().html("");container.html('<h1 class="ajax-loading-animation"><i class="fa fa-cog fa-spin"></i> Loading...</h1>');if(container[0]==$("#content")[0]){$('body').find('> *').filter(':not('+ignore_key_elms+')').empty().remove();drawBreadCrumb();$("html").animate({scrollTop:0},"fast");}},success:function(data){container.css({opacity:'0.0'}).html(data).delay(50).animate({opacity:'1.0'},300);data=null;container=null;},error:function(xhr,status,thrownError,error){container.html('<h4 class="ajax-loading-error"><i class="fa fa-warning txt-color-orangeDark"></i> Error requesting <span class="txt-color-red">'+url+'</span>: '+xhr.status+' <span style="text-transform: capitalize;">'+thrownError+'</span></h4>');},async:true});}function drawBreadCrumb(opt_breadCrumbs){var a=$("nav li.active > a"),b=a.length;bread_crumb.empty(),bread_crumb.append($("<li>Home</li>")),a.each(function(){bread_crumb.append($("<li></li>").html($.trim($(this).clone().children(".badge").remove().end().text()))),--b||(document.title=bread_crumb.find("li:last-child").text())});if(opt_breadCrumbs!=undefined){$.each(opt_breadCrumbs,function(index,value){bread_crumb.append($("<li></li>").html(value));document.title=bread_crumb.find("li:last-child").text();});}}function pageSetUp(){if(thisDevice==="desktop"){$("[rel=tooltip], [data-rel=tooltip]").tooltip();$("[rel=popover], [data-rel=popover]").popover();$("[rel=popover-hover], [data-rel=popover-hover]").popover({trigger:"hover"});}else{$("[rel=popover], [data-rel=popover]").popover();$("[rel=popover-hover], [data-rel=popover-hover]").popover({trigger:"hover"});}}$('body').on('click',function(e){$('[rel="popover"], [data-rel="popover"]').each(function(){if(!$(this).is(e.target)&&$(this).has(e.target).length===0&&$('.popover').has(e.target).length===0){$(this).popover('hide');}});});$('body').on('hidden.bs.modal','.modal',function(){$(this).removeData('bs.modal');});function getParam(name){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(window.location.href);if(results==null)return"";else
return results[1];}$.fn.removeClassPrefix=function(prefix){this.each(function(i,it){var classes=it.className.split(" ").map(function(item){return item.indexOf(prefix)===0?"":item;});it.className=$.trim(classes.join(" "));});return this;};